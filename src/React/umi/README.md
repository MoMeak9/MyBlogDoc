# UmiJS ä¹Œç±³å­¦ä¹ å®æˆ˜:rice:

> å‚ç…§æ–‡æ¡£
>
> [å®˜æ–¹æ–‡æ¡£](https://umijs.org/)
>
> [Umi 4 å‘å¸ƒå•¦ ğŸˆ](https://juejin.cn/post/7111528216631705608)
>
> [umi3æ•™ç¨‹](https://juejin.cn/post/7021358536504393741)

ç›®å‰umiå·²ç»æ›´æ–°åˆ°4å•¦~ï¼Œæ–‡ç« å°±åªæŒ‘é‡è¦çš„è®²è§£è®°å½•~

## ç®€ä»‹

Umiï¼Œä¸­æ–‡å‘éŸ³ä¸ºã€Œä¹Œç±³ã€ï¼Œæ˜¯å¯æ‰©å±•çš„ä¼ä¸šçº§å‰ç«¯åº”ç”¨æ¡†æ¶ã€‚Umi ä»¥è·¯ç”±ä¸ºåŸºç¡€çš„ï¼ŒåŒæ—¶æ”¯æŒé…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±ï¼Œä¿è¯è·¯ç”±çš„åŠŸèƒ½å®Œå¤‡ï¼Œå¹¶ä»¥æ­¤è¿›è¡ŒåŠŸèƒ½æ‰©å±•ã€‚ç„¶åé…ä»¥ç”Ÿå‘½å‘¨æœŸå®Œå–„çš„æ’ä»¶ä½“ç³»ï¼Œè¦†ç›–ä»æºç åˆ°æ„å»ºäº§ç‰©çš„æ¯ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæ”¯æŒå„ç§åŠŸèƒ½æ‰©å±•å’Œä¸šåŠ¡éœ€æ±‚ã€‚

Umi æ˜¯èš‚èšé›†å›¢çš„åº•å±‚å‰ç«¯æ¡†æ¶ï¼Œå·²ç›´æ¥æˆ–é—´æ¥åœ°æœåŠ¡äº† 10000+ åº”ç”¨ï¼ŒåŒ…æ‹¬ Javaã€Nodeã€H5 æ— çº¿ã€ç¦»çº¿ï¼ˆHybridï¼‰åº”ç”¨ã€çº¯å‰ç«¯ assets åº”ç”¨ã€CMS åº”ç”¨ã€Electron åº”ç”¨ã€Serverless åº”ç”¨ç­‰ã€‚ä»–å·²ç»å¾ˆå¥½åœ°æœåŠ¡äº†æˆ‘ä»¬çš„å†…éƒ¨ç”¨æˆ·ï¼ŒåŒæ—¶ä¹ŸæœåŠ¡äº†ä¸å°‘å¤–éƒ¨ç”¨æˆ·ï¼ŒåŒ…æ‹¬æ·˜ç³»ã€é£çŒªã€é˜¿é‡Œäº‘ã€å­—èŠ‚ã€è…¾è®¯ã€å£ç¢‘ã€ç¾å›¢ç­‰ã€‚åœ¨ 2021 å¹´å­—èŠ‚çš„[è°ƒç ”æŠ¥å‘Š](https://zhuanlan.zhihu.com/p/403206195)ä¸­ï¼ŒUmi æ˜¯å…¶ä¸­ 25.33% å¼€å‘è€…çš„é€‰æ‹©ã€‚

Umi æœ‰å¾ˆå¤šéå¸¸æœ‰æ„æ€çš„ç‰¹æ€§ï¼Œæ¯”å¦‚ã€‚

1ã€**ä¼ä¸šçº§**ï¼Œåœ¨å®‰å…¨æ€§ã€ç¨³å®šæ€§ã€æœ€ä½³å®è·µã€çº¦æŸèƒ½åŠ›æ–¹é¢ä¼šè€ƒè™‘æ›´å¤š
<u>2ã€**æ’ä»¶åŒ–**ï¼Œå•¥éƒ½èƒ½æ”¹ï¼ŒUmi æœ¬èº«ä¹Ÿæ˜¯ç”±æ’ä»¶æ„æˆ</u>
3ã€**MFSU**ï¼Œæ¯” Vite è¿˜å¿«çš„ Webpack æ‰“åŒ…æ–¹æ¡ˆ
4ã€åŸºäº React Router 6 çš„å®Œå¤‡è·¯ç”±
5ã€é»˜è®¤æœ€å¿«çš„è¯·æ±‚
6ã€SSR & SSG
7ã€ç¨³å®šç™½ç›’æ€§èƒ½å¥½çš„ ESLint å’Œ Jest
8ã€React 18 çš„æ¡†æ¶çº§æ¥å…¥
9ã€Monorepo æœ€ä½³å®è·µ
...

å¼•ç”¨ä¸€ä¸‹äº‘è°¦å¤§ä½¬çš„è¯ï¼š

> 

### å•¥æ—¶å€™ä¸ç”¨ï¼Ÿ

æ€»ç»“ä¸€ä¸‹ï¼šä½ç‰ˆæœ¬æµè§ˆå™¨ã€Reactæˆ–è€…Node14ä»¥ä¸‹ç¯å¢ƒï¼Œéœ€è¦é«˜ç²’åº¦çš„è·¯ç”±ç®¡ç†å’ŒWebpackå¤„ç†çš„

### ä¸ºä»€ä¹ˆä¸ç”¨ï¼Ÿ

**create-react-appï¼š**æœ‰æ²¡æœ‰å¯èƒ½ï¼ŒVue CLI è¿™ç§æ¸è¿›å¼è®¾è®¡å°±æ˜¯å¾ˆå¥½çš„æ­£é¢ä¾‹å­ï¼Ÿcreate-react-appå°±æ˜¯é€Šå•¦ï¼ˆç‹—å¤´ï¼‰ã€

**next.js**ï¼šå¦‚æœè¦åš SSRï¼Œnext.js æ˜¯éå¸¸å¥½çš„é€‰æ‹©ï¼Œä½†æ˜¯ä½œè€…ä¹Ÿè¯´äº†ï¼ŒUmiæ›´å¥½çš„æ‰©å±•æ€§ï¼ˆæ’ä»¶å¾ˆå¥½ç”¨ï¼‰ï¼Œæ›´æ¥åœ°æ°”

**remix**ï¼šè¿˜æ²¡äº†è§£....

### [å¿«é€Ÿä¸Šæ‰‹](https://umijs.org/docs/tutorials/getting-started)

å»å®˜æ–¹æ–‡æ¡£çœ‹å§~

### è¯·æ±‚çš„å°è£…

srcæ–‡ä»¶å¤¹ä¸‹æ–°å»º `request`æ–‡ä»¶å¤¹ æ–°å»º`request.ts`

```js
request.ts
/**
 * ç½‘ç»œè¯·æ±‚å·¥å…· å°è£…umi-request
 * æ›´è¯¦ç»†çš„ api æ–‡æ¡£: https://github.com/umijs/umi-request
 */

import { extend } from 'umi-request';
import type { RequestOptionsInit } from 'umi-request';
import { notification } from 'antd';

// codeMessageä»…ä¾›å‚è€ƒ å…·ä½“æ ¹æ®å’Œåç«¯åå•†,åœ¨è¯¦ç»†å®šä¹‰.
const codeMessage = {
  200: 'æœåŠ¡å™¨æˆåŠŸè¿”å›è¯·æ±‚çš„æ•°æ®ã€‚',
  400: 'å‘å‡ºçš„è¯·æ±‚æœ‰é”™è¯¯ï¼ŒæœåŠ¡å™¨æ²¡æœ‰è¿›è¡Œæ–°å»ºæˆ–ä¿®æ”¹æ•°æ®çš„æ“ä½œã€‚',
  500: 'æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨ã€‚',
};
type mapCode = 200 | 400 | 500;

/**
 * é”™è¯¯å¼‚å¸¸å¤„ç†ç¨‹åº
 */
const errorHandler = (error: { response: Response }): Response => {
  const { response } = error;
  if (response && response.status) {
    let errorText = codeMessage[response.status as mapCode] || response.statusText;
    const { status, url } = response;
    response
      ?.clone()
      ?.json()
      ?.then((res) => {
        // åç«¯è¿”å›é”™è¯¯ä¿¡æ¯,å°±ç”¨åç«¯ä¼ å›çš„
        errorText = res.msg ? res.msg : errorText;
        notification.error({
          message: `è¯·æ±‚é”™è¯¯ ${status}: ${url}`,
          description: errorText,
        });
      });
  } else if (!response) {
    notification.error({
      description: 'æ‚¨çš„ç½‘ç»œå‘ç”Ÿå¼‚å¸¸ï¼Œæ— æ³•è¿æ¥æœåŠ¡å™¨',
      message: 'ç½‘ç»œå¼‚å¸¸',
    });
  }
  return response;
};

/**
 * é…ç½®requestè¯·æ±‚æ—¶çš„é»˜è®¤å‚æ•°
 */
const request = extend({
  errorHandler, // é»˜è®¤é”™è¯¯å¤„ç†
  credentials: 'include', // é»˜è®¤è¯·æ±‚æ˜¯å¦å¸¦ä¸Šcookie
});

// æ ¹æ®ä¸åŒçš„å¼€å‘ç¯å¢ƒ,é…ç½®è¯·æ±‚å‰ç¼€
interface ApiPrefix {
  dev: string;
  test: string;
  prd: string;
}
const apiPreFix: ApiPrefix = {
  dev: 'http://120.55.193.14:3030/',
  test: 'http://120.55.193.14:3030/',
  prd: 'http://120.55.193.14:3030/',
};
// requestæ‹¦æˆªå™¨, æºå¸¦token,ä»¥åŠæ ¹æ®ç¯å¢ƒ,é…ç½®ä¸åŒçš„è¯·æ±‚å‰ç¼€
request.interceptors.request.use((url: string, options: RequestOptionsInit) => {
  // ä¸æºå¸¦tokençš„è¯·æ±‚æ•°ç»„
  let notCarryTokenArr: string[] = [];
  if (notCarryTokenArr.includes(url)) {
    return {
      url: `${apiPreFix[CurrentEnvironment]}${url}`,
      options,
    };
  }
  // ç»™æ¯ä¸ªè¯·æ±‚å¸¦ä¸Štoken
  let token = localStorage.getItem('tokens') || '';
  let headers = {
    Authorization: `Bearer ${token}`,
  };
  return {
    url: `${apiPreFix[CurrentEnvironment]}${url}`,
    options: { ...options, interceptors: true, headers },
  };
});

/**
 * @url è¯·æ±‚çš„url
 * @parameter ä¸Šä¼ çš„å‚æ•°
 */

// å°è£…çš„get,post.put,deleteè¯·æ±‚
const get = async (url: string, parameter?: Record<string, unknown>): Promise<any> => {
  try {
    const res = await request(url, { method: 'get', params: parameter });
    return res;
  } catch (error) {
    console.error(error);
  }
};
const deletes = async (url: string, parameter?: Record<string, unknown>): Promise<any> => {
  try {
    const res = await request(url, { method: 'delete', params: parameter });
    return res;
  } catch (error) {
    console.error(error);
  }
};
const post = async (url: string, parameter?: Record<string, unknown>): Promise<any> => {
  try {
    const res = await request(url, { method: 'post', data: parameter });
    return res;
  } catch (error) {
    console.error(error);
  }
};
const put = async (url: string, parameter?: Record<string, unknown>): Promise<any> => {
  try {
    const res = await request(url, { method: 'put', data: parameter });
    return res;
  } catch (error) {
    console.error(error);
  }
};

export default {
  get,
  post,
  put,
  deletes,
};
å¤åˆ¶ä»£ç 
```

è¿™é‡Œå°è£…äº†umi-request,ç»Ÿä¸€å¤„ç†äº†æ¥å£é”™è¯¯,è¯·æ±‚æ‹¦æˆªå™¨æºå¸¦tokenç­‰.æœ€ååœ¨é…åˆuseRequest éå¸¸çš„å¥½ç”¨.

## è®¾è®¡æ€è·¯

1ã€æŠ€æœ¯æ”¶æ•› :star:

æˆ‘ä»¬å¸Œæœ›å¼€å‘è€…ä¾èµ– Umi ä¹‹åå°±æ— éœ€å…³å¿ƒ babelã€webpackã€postcssã€reactã€react-router ç­‰ä¾èµ–ï¼Œè€Œä¾èµ– @umijs/max ä¹‹åæ— éœ€å†å…³å¿ƒå¼€å‘ä¸­å°é¡¹ç›®çš„ä¾èµ–å’ŒæŠ€æœ¯æ ˆã€‚

2ã€æ’ä»¶å’Œæ’ä»¶é›† :star:

Umi é€šè¿‡æä¾›æ’ä»¶å’Œæ’ä»¶é›†çš„æœºåˆ¶æ¥æ»¡è¶³ä¸åŒåœºæ™¯å’Œä¸šåŠ¡çš„éœ€æ±‚ã€‚æ’ä»¶æ˜¯ä¸ºäº†æ‰©å±•ä¸€ä¸ªåŠŸèƒ½ï¼Œè€Œæ’ä»¶é›†æ˜¯ä¸ºäº†æ‰©å±•ä¸€ç±»ä¸šåŠ¡ã€‚æ¯”å¦‚è¦æ”¯æŒ vueï¼Œæˆ‘ä»¬å¯ä»¥æœ‰ `@umijs/preset-vue`ï¼ŒåŒ…å« vue ç›¸å…³çš„æ„å»ºå’Œè¿è¡Œæ—¶ï¼›æ¯”å¦‚è¦æ”¯æŒ h5 çš„åº”ç”¨ç±»å‹ï¼Œå¯ä»¥æœ‰ `@umijs/preset-h5`ï¼ŒæŠŠ h5 ç›¸å…³çš„åŠŸèƒ½é›†åˆåˆ°ä¸€èµ·ã€‚

3ã€æœ€ä½³å®è·µ

4ã€ä¼ä¸šçº§

5ã€import all from umi :star:

å¾ˆå¤šäººå¯èƒ½éƒ½ç¬¬ä¸€æ¬¡å¬åˆ°ã€‚import all from umi æ„æ€æ˜¯æ‰€æœ‰ import éƒ½æ¥è‡ª `umi`ã€‚æ¯”å¦‚ dva ä¸æ˜¯ `import { connect } from 'dva'`ï¼Œè€Œæ˜¯ `import { connect } from 'umi'`ï¼Œä» umi ä¸­å¯¼å‡ºã€‚å¯¼å‡ºçš„æ–¹æ³•ä¸ä»…æ¥è‡ª umi è‡ªèº«ï¼Œè¿˜æ¥è‡ª umi æ’ä»¶ã€‚

6ã€ç¼–è¯‘æ—¶æ¡†æ¶

7ã€ä¾èµ–é¢„æ‰“åŒ…

8ã€é»˜è®¤å¿«

9ã€çº¦æŸä¸å¼€æ”¾

## å¸¸ç”¨API



## [Umi Max ç®€ä»‹](https://umijs.org/docs/max/introduce)

> ä¸ºäº†æ–¹ä¾¿å¼€å‘è€…æ›´åŠ æ–¹ä¾¿çš„ä½¿ç”¨è¿™äº›æ’ä»¶ï¼Œåœ¨æˆ‘ä»¬è¿™äº›æ’ä»¶å¼€æºçš„åŸºç¡€ä¸Šï¼Œç›´æ¥å°†ä»–ä»¬é›†æˆåˆ°ä¸€èµ·ï¼Œæ‰“é€ äº† `@umijs/max`ã€‚ è®©å¼€å‘è€…ç›´æ¥å¯ä»¥é€šè¿‡è„šæ‰‹æ¶é©¬ä¸Šè·å¾—å’Œèš‚èšé›†å›¢å¼€å‘ Umi åº”ç”¨ä¸€æ ·çš„å¼€å‘ä½“æ£€ã€‚

æ–°å»ºçš„é¡¹ç›®é»˜è®¤å®‰è£…ä»¥ä¸‹æ’ä»¶, å¯ä»¥æŒ‰éœ€å¼€å¯ï¼š

- [æƒé™](https://umijs.org/docs/max/access)
- [ç«™ç‚¹ç»Ÿè®¡](https://umijs.org/docs/max/analytics)
- [Antd](https://umijs.org/docs/max/antd)
- [dva](https://umijs.org/docs/max/dva)
- [initial-state](https://umijs.org/docs/api/runtime-config#getinitialstate)
- [å¸ƒå±€å’Œèœå•](https://umijs.org/docs/max/layout-menu)
- [å¤šè¯­è¨€](https://umijs.org/docs/max/locale)
- [model](https://umijs.org/docs/max/data-flow)
- [ä¹¾å¤å¾®å‰ç«¯](https://umijs.org/docs/max/micro-frontend)
- [è¯·æ±‚åº“](https://umijs.org/docs/max/request)
- [tailwindCSSæ”¯æŒ](https://umijs.org/docs/max/tailwindcss)

## UmiJS 4æ›´æ–°å†…å®¹

**å¤šæ„å»ºå¼•æ“ã€‚** Umi 4 åŒæ—¶æ”¯æŒ Vite å’Œ Webpack ä¸¤ç§æ„å»ºæ–¹å¼ï¼Œå¹¶å°½é‡ç¡®ä¿ä»–ä»¬ä¹‹é—´åŠŸèƒ½çš„ä¸€è‡´æ€§ï¼Œè®©å¼€å‘è€…å¯ä»¥é€šè¿‡ä¸€è¡Œé…ç½®è¿›è¡Œåˆ‡æ¢ã€‚å¯èƒ½æœ‰äº›åŒå­¦ä¼šå–œæ¬¢ dev ç”¨ viteï¼Œbuild ç”¨ webpack è¿™æ ·çš„ç»„åˆã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿåœ¨æ¢ç´¢åŒ…æ‹¬ ESMi åœ¨å†…çš„å…¶ä»–æ„å»ºæ–¹æ¡ˆçš„æ¢ç´¢ã€‚

**é»˜è®¤å¿«ã€‚** é»˜è®¤å¿«æ˜¯å¤šç»´åº¦çš„ï¼Œæˆ‘ä»¬é€šè¿‡ MFSU V3 + Webpack 5 ç¼“å­˜è§£ Dev æ—¶ç¼–è¯‘æ…¢çš„é—®é¢˜ï¼›å†…ç½‘è¿˜æœ‰é€šè¿‡ Webpack 5 ç‰©ç†ç¼“å­˜å’Œ CD å¹³å°ç»“åˆè§£ Build æ—¶ç¼–è¯‘æ…¢çš„é—®é¢˜ï¼›æœ‰ä½¿ç”¨ esbuild åš js å’Œ css çš„å‹ç¼©å™¨ã€é…ç½®å’Œ MOCK æ–‡ä»¶çš„è¯»å–ã€jest çš„ transformerï¼Œè®©é™¤æ„å»ºä¹‹å¤–çš„å…¶ä»–ç¯èŠ‚ä¹Ÿé£å¿«ï¼›æ­¤å¤–è¿˜æœ‰è¿è¡Œæ—¶é€Ÿåº¦ä¹Ÿæœ‰è€ƒè™‘ã€‚

**MFSU V3ã€‚** Umi 3 çš„ MFSU å¤§å®¶å¯èƒ½å¤šå°‘æœ‰æ¥è§¦è¿‡ï¼Œè™½ç„¶æœ‰ç”¨ï¼Œä½† DX ä¸å¤Ÿå¥½ã€‚ç”¨çš„æ—¶å€™ä¼šé‡åˆ°ä¸€äº›å‘ï¼Œä»¥è‡³äºå¾ˆå¤šåŒå­¦éƒ½æŒæ¡äº†ä¸€é¡¹ç‰¹æ®ŠæŠ€èƒ½ï¼Œé‡åˆ°é—®é¢˜æ—¶ rm -rf src/.umiã€‚å¤§å®¶å¯èƒ½ä¼šé‡åˆ° monorepo ä¸æ”¯æŒã€çƒ­æ›´æ–°å¯¼è‡´ Tab å¡æ­»ã€è¯·æ±‚å¤šå¯¼è‡´é¡µé¢æ‰“å¼€æ…¢ã€ä¸€äº›è¯­æ³•ä¸æ”¯æŒçš„é—®é¢˜ã€‚ä»¥ä¸Šé—®é¢˜åœ¨ MFSU V3 ä¸­å…¨è§£ï¼åŸºäºæ­¤ï¼Œæˆ‘ä»¬éå¸¸æœ‰ä¿¡å¿ƒåœ°åœ¨ Umi 4 ä¸­é»˜è®¤å¼€å¯ MFSU åŠŸèƒ½ã€‚å½“ç„¶ï¼Œå¦‚æœä½ ä¸å–œæ¬¢ï¼Œä¼šä¿ç•™æ‰‹åŠ¨é…ç½® mfsu: false å…³é—­çš„å£å­ã€‚åŒæ—¶ï¼ŒMFSU V3 è¿˜å¯è„±ç¦» Umi ç‹¬ç«‹ä½¿ç”¨ã€‚

**Umi Maxã€‚** è¿™æ˜¯å†…éƒ¨ Bigfish æ¡†æ¶çš„å¯¹å¤–ç‰ˆæœ¬ï¼Œè§£æˆ‘ä»¬è‡ªå·±çš„é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿç»™ç¤¾åŒºå¦ä¸€ä¸ªé›†ä¸­åŒ–æ¡†æ¶çš„é€‰æ‹©ï¼Œå®šä½æ˜¯ä¸­åå°æ¡†æ¶ï¼ŒåŒ…å«äº†ä¸­åå°ç›¸å…³çš„å¤§é‡æœ€ä½³å®è·µçš„æ’ä»¶ã€‚å¦‚æœæœ‰å®šåˆ¶éœ€æ±‚ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒä»–æ¥å®ç°å†…ç½‘æ¡†æ¶çš„å®šåˆ¶ï¼Œæ¯”å¦‚å¿«æ‰‹å›¢é˜Ÿå°±æœ‰åŸºäº Umi 4 çš„æ¡†æ¶å®šåˆ¶ï¼Œè¿˜æœ‰ Alita ä¹Ÿæ˜¯åŸºäº Umi å®šåˆ¶çš„é¢å‘ç§»åŠ¨ç«¯çš„æ¡†æ¶ã€‚

**React Router 6ã€‚** æˆ‘ä»¬å‡çº§äº†è·¯ç”±æ–¹æ¡ˆåˆ° React Router 6ï¼Œå–œå¿§å‚åŠã€‚å¥½æ¶ˆæ¯æ˜¯ï¼ŒReact Router 6 æ˜¯ Remix çš„åŸºç¡€åº“ï¼Œé¢å‘æ¡†æ¶å±‚åšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œè·¯ç”±å®ç°å±‚æ›´ä¼˜é›…ï¼ŒUmi å¾—ä»¥åˆ é™¤å¤§é‡è·¯ç”±æ¸²æŸ“çš„ä»£ç ï¼›åæ¶ˆæ¯æ˜¯ï¼Œå¸¦æ¥ä¸å°‘ Break Changeï¼Œæ¯”å¦‚ä¹‹å‰çˆ¶è·¯ç”±æ¸²æŸ“å­è·¯ç”±ç”¨ childrenï¼Œå¾—æ¢æˆ ã€‚

**æ”¯æŒ Vueã€‚** Umi 4 ä¸­æä¾›äº† Vue æ”¯æŒï¼Œè®°å¾—æˆ‘åœ¨ Umi 2 æ—¶ç”»è¿‡ä¸€å¼ æ¶æ„å›¾ï¼Œå…¶ä¸­å°±æœ‰ Vue çš„ä¸€ç¯ï¼ŒUmi 3 æ—¶ä¹Ÿæœ‰è¿‡å°è¯•ï¼Œä½†é‚£ä¼š Vue 3 è¿˜ä¸å¤ªæˆç†Ÿï¼Œæ¥å…¥æ—¶é‡åˆ°ä¸å°‘å‘ï¼Œè¿™ä¸ªå‘ä»Šå¤©æ€»ç®—æ˜¯è¡¥ä¸Šäº†ã€‚æ­¤åŠŸèƒ½ç”±ç¤¾åŒºåŒå­¦æ“åˆ€ï¼Œåªéœ€è£…è½½ä¸€ä¸ª preset å³å¯åˆ‡æ¢åˆ° Vueã€‚

**é»˜è®¤æœ€å¿«çš„ CSR è¯·æ±‚ã€‚** é¡¹ç›®æ„å»ºå¿«è§£çš„æ˜¯ DX é—®é¢˜ï¼Œä½†åŒæ—¶ä¹Ÿåº”è¯¥å…³æ³¨ UXã€‚Client Loader çš„ç›®çš„æ˜¯è®©åº”ç”¨åŠ è½½é»˜è®¤å¿«ï¼Œé¿å… React é¡¹ç›®ç»å…¸çš„ Render-Then-Fetch çš„åŠ è½½ç€‘å¸ƒæµé—®é¢˜ã€‚æ•ˆæœè§ä¸‹å›¾ï¼Œç¤ºä¾‹é¡¹ç›®çš„ä» 9s é™åˆ° 6sï¼Œè¿™ 6s è¿˜æ˜¯ä¹‹å‰æˆªçš„å›¾ï¼Œä¸Šäº† Preload åŠŸèƒ½ä¹‹åå…¶å®å·²æ›´å¿«ã€‚

**ç™½ç›’æ–‡æ¡£çš„ Lintã€‚** Umi 4 é‡Œå†…ç½®äº†æˆ‘ä»¬ç²¾æŒ‘ç»†é€‰çš„ lint è§„åˆ™ï¼Œåªæœ‰è´¨é‡ç±»ä¸å¼€å¯èƒ½ä¼šå¯¼è‡´é¡¹ç›®é—®é¢˜çš„è§„åˆ™ï¼Œä¸åŒ…å«é£æ ¼ç±»çš„è§„åˆ™ï¼Œä¸åŒ…å« TypeScript ä¸­ type-aware ç±»çš„è§„åˆ™ï¼Œè¿™ç±»è§„åˆ™éœ€è¦è·‘æ•´ä¸ªé¡¹ç›®ï¼Œä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼›åŒæ—¶ï¼Œæˆ‘ä»¬é€šè¿‡ @rushstack/eslint-pach çš„æ–¹å¼é”å®šäº† config é‡Œæ‰¾ plugin çš„è§„åˆ™ï¼Œç¡®ä¿è§„åˆ™æ˜¯é•¿æœŸç¨³å®šçš„ã€‚

**SSRã€‚** Umi 4 é‡å†™äº† SSR åŠŸèƒ½ï¼Œç›®å‰æ­¤åŠŸèƒ½è¿˜åœ¨ beta é˜¶æ®µï¼Œè¯·å‹¿å°†å…¶ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚Umi 4 çš„ SSR æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼Œ1ï¼‰server ä»£ç çš„æ„å»ºåŸºäº esbuildï¼Œæ‰€ä»¥æå¿«ï¼Œ2ï¼‰è¯·æ±‚çš„å¤„ç†ç±»ä¼¼ next.js çš„ getServerSideProps å’Œ remix çš„ loaderï¼Œåªåœ¨æœåŠ¡ç«¯è·‘ï¼Œ3ï¼‰åŸºäº react 18 çš„ suspense å’Œ renderToPipeableStreamã€‚å®ç°åŸå› ï¼Œéƒ¨ç½²å±‚ç›®å‰ä»…å®ç°äº† vercel çš„ adapterã€‚è¿™é‡Œæœ‰ä¸ªç®€å•çš„ Todos ç¤ºä¾‹ï¼š[test-vercel-chencheng.vercel.app/](https://link.juejin.cn?target=https%3A%2F%2Ftest-vercel-chencheng.vercel.app%2F)

**Umi UI å·åœŸé‡æ¥ï¼Ÿ** æ—¥å¸¸æ’æŸ¥é—®é¢˜æ—¶ï¼Œå¾ˆå¤š Umi æ¡†æ¶çš„å†…éƒ¨çŠ¶æ€æ˜¯çœ‹ä¸åˆ°çš„ï¼Œæ¯”å¦‚æ’ä»¶å¯ç”¨æƒ…å†µã€appData å…ƒæ•°æ®ã€ä¿®æ”¹è¿‡çš„æœ€ç»ˆé…ç½®ã€ä¿®æ”¹è¿‡çš„æœ€ç»ˆ webpack é…ç½®ã€ä¿®æ”¹è¿‡çš„æœ€ç»ˆè·¯ç”±ã€MFSU çš„ module graph ä¿¡æ¯ç­‰ã€‚Umi 4 æä¾›äº† /__umi/ è·¯ç”±ï¼Œdev é˜¶æ®µå¯ç”¨ï¼Œæ•ˆæœè§ä¸‹å›¾ã€‚å®šä½æ˜¯å¼€å‘è¾…åŠ©ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯ã€Œä¸ç‰ˆ Umi UIã€ã€‚

## é¢å¤–çš„:octopus:

**åŸºäº React çš„åº”ç”¨ç ”å‘æ¡†æ¶ icejs** [[**é£å†°**](https://ice.work/)](https://ice.work/)
